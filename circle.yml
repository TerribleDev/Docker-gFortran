machine:
  services:
    - docker

dependencies:
  override:
    - docker info
    - docker build --rm=false -t TerribleDev/Fortran:4.8-trusty ubuntu/trusty/4.8
    - docker build --rm=false -t TerribleDev/Fortran:4.7-trusty ubuntu/trusty/4.7
    - docker build --rm=false -t TerribleDev/Fortran:4.6-trusty ubuntu/trusty/4.6
    - docker build --rm=false -t TerribleDev/Fortran:4.4-trusty ubuntu/trusty/4.4

deployment:
  hub:
    branch: master
    commands:
      - docker login -e $DOCKER_EMAIL -u $DOCKER_USER -p $DOCKER_PASS
      - docker push TerribleDev/Fortran:4.8-trusty
      - docker push TerribleDev/Fortran:4.7-trusty
      - docker push TerribleDev/Fortran:4.6-trusty
      - docker push TerribleDev/Fortran:4.4-trusty